@inject LocalStorage Storage
@inject IUriHelper UriHelper
@inject IJSRuntime JSRuntime
@using Cloudcrate.AspNetCore.Blazor.Browser.Storage
@using PartagesWebBlazorFSCore3.Shared.Helpers
<nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item" href="/forumCategories">
            <!--<img src="https://bulma.io/images/bulma-logo.png" width="112" height="28">-->
            <img src="data:image/png;base64,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" width="112" height="28" />
        </a>

        <a id="navbar-burger" role="button" onclick="@ToogleNavbar" class="navbar-burger burger @toogleClass" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>

    <div id="navbarBasicExample" class="navbar-menu @toogleClass">
        <div class="navbar-start">
            <a class="navbar-item" href="/">
                Accueil
            </a>

            <a class="navbar-item" href="forumCategories">
                Forum
            </a>

            @if (Storage["token"] != null && Storage["username"] != null)
            {
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link">
                        @Storage["username"].CapitalizeFirst()
                    </a>

                    <div class="navbar-dropdown">
                        <a class="navbar-item" href="messages">
                            Messages 
                        </a>
                        <hr class="navbar-divider">
                        <a class="navbar-item" onclick="@LogOut">
                            Se déconnecter
                        </a>
                    </div>
                </div>
            }
        </div>
        @if (Storage["token"] == null || Storage["username"] == null)
        {
            <div class="navbar-end">
                <div class="navbar-item">
                    <div class="buttons">
                        <NavLink class="button is-primary" href="signUp">
                            <strong>S'inscrire</strong>
                        </NavLink>
                        <a class="button is-light" href="login">
                            Se Connecter
                        </a>
                    </div>
                </div>
            </div>
        }
    </div>
</nav>
@functions {
    string toogleClass = "";

    private void ToogleNavbar()
    {
        if (toogleClass == "")
        {
            toogleClass = "is-active";
        }
        else
        {
            toogleClass = "";
        }
    }

    private async void LogOut()
    {
        Storage.RemoveItem("token");
        Storage.RemoveItem("username");
        UriHelper.NavigateTo("/");
        await JSRuntime.InvokeAsync<bool>("Refresh");
    }
}